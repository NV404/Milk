datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

model User {
  id        String   @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  number String  @unique
  name   String?

  addressLine1 String?
  addressLine2 String?
  lat          String?
  lng          String?

  shopName     String?
  shopAddress  String?
  aadharNumber String?
  shopLat      String?
  shopLng      String?

  isSeller Boolean @default(false)

  GSTNumber String?
  isVendor  Boolean @default(false)

  products Product[]

  carts        Cart[]
  orders       Order[] @relation("buyer")
  sellerOrders Order[] @relation("seller")
}

model Cart {
  id String @id @default(uuid())

  userID String
  user   User   @relation(fields: [userID], references: [id])

  productID String
  product   Product @relation(fields: [productID], references: [id])

  quantity Int @default(1)

  isRemoved Boolean @default(false)

  orderID String?
  order   Order?  @relation(fields: [orderID], references: [id])
}

model Product {
  id String @id @default(uuid())

  name        String
  imageURL    String?
  description String?

  price Decimal

  packageType String

  weightUnit String?

  weight Decimal?

  sellerId String
  seller   User   @relation(fields: [sellerId], references: [id])

  categoryID String?
  category   Category? @relation(fields: [categoryID], references: [id])

  carts Cart[]
}

model Order {
  id String @id @default(uuid())

  createdAt DateTime @default(now())
  price     Decimal

  addressLine1 String?
  addressLine2 String?

  lat String?
  lng String?

  status String @default("pending") //pending, accepted, rejected, delivered, failed

  userID String
  user   User   @relation("buyer", fields: [userID], references: [id])

  sellerId String
  seller   User   @relation("seller", fields: [sellerId], references: [id])

  carts Cart[]
}

model Category {
  id String @id @default(uuid())

  iconURL String
  name    String
  slug    String @unique

  products Product[]
}
